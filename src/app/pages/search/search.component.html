<div class="max-w-6xl mx-auto py-6 px-4">
  <h1 class="text-2xl font-semibold mb-4 flex items-center">
    <i class="fa-brands fa-github mr-2"></i> Buscador de usuarios GitHub
  </h1>

  <app-error-container></app-error-container>

  <form
    class="flex flex-wrap items-center gap-4 mb-4"
    (ngSubmit)="onSearch()"
    [formGroup]="form"
  >
    <div class="flex-1 min-w-[250px]">
      <input
        class="w-full px-3 py-2 border rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500"
        formControlName="query"
        placeholder="Ej: angular, doublevpartners, etc."
      />
      @if (form.get('query')?.touched && form.get('query')?.invalid) {
      <div class="mt-1 text-sm text-red-600">
        @if (form.get('query')?.hasError('required')) { Campo requerido. } @if
        (form.get('query')?.hasError('minlength')) { MÃ­nimo 4 caracteres. }
      </div>
      }
    </div>

    <div class="flex items-center gap-2">
      <button
        class="px-4 py-2 bg-blue-600 text-white rounded-md shadow hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-1"
        type="submit"
      >
        <i class="fa-solid fa-magnifying-glass"></i> Buscar
      </button>

      @if (loading()) {
      <div class="flex items-center">
        <div
          class="animate-spin rounded-full h-7 w-7 border-2 border-blue-600 border-t-transparent"
        ></div>
      </div>
      }
    </div>
  </form>

  @if (users().length) {
  <div class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-4 mb-6">
    @for (user of users(); track user.id) {
    <app-card-user [user]="user"></app-card-user>
    }
  </div>

  <section>
    <app-followers-chart [labels]="chartLabels()" [data]="chartFollowers()" />
  </section>
  }



</div>
